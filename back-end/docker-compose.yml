services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "8080:8080"
    environment:
      - ROM_IMG_DIR=/app/rom/img
      - ROM_DB_DIR=/app/rom/rom_database.json
    volumes:
      - .:/app                    # Mount source code for live reload
      - ../rom:/app/rom:rw        # Mount ROM folder (read-write)
      - /app/backend              # Prevent overwriting compiled binary
    restart: unless-stopped